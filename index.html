<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SAMBUCA JOE</title>
<style>
@font-face {
  font-family: 'VCR';
  src: url('https://cdn.jsdelivr.net/gh/webfontkit/vcr-osd-mono@1.0.0/VCR_OSD_MONO_1.001.ttf') format('truetype');
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
:root { --f: 'VCR', 'Courier New', monospace; }

html, body {
  background: #fff;
  color: #000;
  font-family: var(--f);
  -webkit-font-smoothing: antialiased;
  min-height: 100vh;
}

nav {
  position: sticky;
  top: 0;
  z-index: 100;
  background: #fff;
  display: grid;
  grid-template-columns: 40px 1fr 40px;
  align-items: center;
  padding: 12px 20px 8px;
}

.nav-plus {
  font-size: 24px;
  font-weight: 200;
  color: #000;
  cursor: pointer;
  background: none;
  border: none;
  line-height: 1;
  font-family: sans-serif;
  justify-self: start;
}

.nav-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
}

.nav-row { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }

.nav-link {
  font-family: var(--f);
  font-size: 11px;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: #c0c0c0;
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
  transition: color 0.15s;
}
.nav-link:hover { color: #000; }
.nav-link.active { color: #000; }

.nav-cart {
  justify-self: end;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
}
.nav-cart svg { width: 17px; height: 17px; stroke: #000; fill: none; stroke-width: 1.1; }

.grid {
  display: grid;
  grid-template-columns: repeat(var(--cols, 6), 1fr);
  padding: 8px 10px 80px;
}

.tile {
  padding: 16px 10px 22px;
  cursor: pointer;
  text-align: center;
}

.tile-img {
  width: 100%;
  aspect-ratio: 1 / 1;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 10px;
  overflow: hidden;
}

.tile-img img {
  max-width: 90%;
  max-height: 90%;
  object-fit: contain;
  display: block;
  transition: transform 0.5s cubic-bezier(.22,.68,0,1.2);
}
.tile:hover .tile-img img { transform: scale(1.06); }

.ph-svg {
  width: 82%;
  opacity: 0.11;
  transition: transform 0.5s cubic-bezier(.22,.68,0,1.2);
}
.tile:hover .ph-svg { transform: scale(1.06); }

.tile-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  padding-top: 4px;
}
.tile-code {
  font-size: 13px;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: #000;
}
.tile-name {
  font-size: 11px;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  color: #000;
  line-height: 1.3;
}
.tile-meta {
  font-size: 11px;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  color: #000;
}

.modal-wrap {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.97);
  z-index: 999;
  align-items: center;
  justify-content: center;
  padding: 40px 24px;
}
.modal-wrap.open { display: flex; }
.modal { width: 100%; max-width: 320px; }

.modal-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}
.modal-id  { font-size: 10px; letter-spacing: 0.18em; text-transform: uppercase; color: #bbb; }
.modal-x   { background: none; border: none; font-family: var(--f); font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase; color: #bbb; cursor: pointer; }
.modal-x:hover { color: #000; }

.modal-name  { font-size: 13px; letter-spacing: 0.08em; text-transform: uppercase; line-height: 1.3; margin-bottom: 4px; }
.modal-color { font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: #aaa; margin-bottom: 16px; }
.modal-price { font-size: 12px; letter-spacing: 0.08em; margin-bottom: 22px; padding-bottom: 18px; border-bottom: 1px solid #ebebeb; }

.sz-label { font-size: 10px; letter-spacing: 0.18em; text-transform: uppercase; color: #bbb; margin-bottom: 9px; }
.sz-grid  { display: grid; grid-template-columns: repeat(5,1fr); gap: 5px; margin-bottom: 22px; }
.sz-btn   { padding: 9px 2px; border: 1px solid #ddd; background: none; font-family: var(--f); font-size: 10px; cursor: pointer; color: #000; transition: all 0.1s; }
.sz-btn:hover, .sz-btn.on { background: #000; color: #fff; border-color: #000; }

.modal-dm { font-size: 10px; letter-spacing: 0.11em; text-transform: uppercase; color: #bbb; line-height: 1.85; border-top: 1px solid #ebebeb; padding-top: 16px; }
.modal-dm a { color: #000; text-decoration: none; }

footer { border-top: 1px solid #ebebeb; padding: 13px 20px; display: flex; justify-content: space-between; }
.ft { font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: #ccc; }
footer a { color: #ccc; text-decoration: none; }
footer a:hover { color: #000; }

@media (max-width: 900px)  { .grid { grid-template-columns: repeat(min(var(--cols,6), 4), 1fr) !important; } }
@media (max-width: 640px)  { .grid { grid-template-columns: repeat(min(var(--cols,6), 3), 1fr) !important; } }
@media (max-width: 400px)  { .grid { grid-template-columns: repeat(2, 1fr) !important; } }
</style>
</head>
<body>

<nav>
  <button class="nav-plus" title="Show all" onclick="filterBy('all', null)">+</button>
  <div class="nav-center" id="navCenter"></div>
  <button class="nav-cart" onclick="alert('DM @sambucajoe on Instagram to purchase')">
    <svg viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
  </button>
</nav>

<main><div class="grid" id="grid"></div></main>

<footer>
  <span class="ft">Sambuca Joe © 2026</span>
  <span class="ft"><a href="mailto:realsambucajoe@gmail.com">Contact</a> · All Sales Final</span>
</footer>

<div class="modal-wrap" id="modal" onclick="bgClose(event)">
  <div class="modal">
    <div class="modal-top">
      <div class="modal-id" id="m-code"></div>
      <button class="modal-x" onclick="closeModal()">Close ×</button>
    </div>
    <div class="modal-name"  id="m-name"></div>
    <div class="modal-color" id="m-color"></div>
    <div class="modal-price" id="m-price"></div>
    <div class="sz-label">Size (US)</div>
    <div class="sz-grid" id="m-sizes"></div>
    <div class="modal-dm">
      DM to purchase · <a href="https://instagram.com/sambucajoe" target="_blank">@sambucajoe</a><br>
      All sales final
    </div>
  </div>
</div>

<script>
// ── ① CATEGORIES — edit labels and values to match your sheet's "cat" column
const CATEGORIES = [
  { label: 'New',         value: 'new'         },
  { label: 'Pokemon',     value: 'pokemon'     },
  { label: 'Baseball',    value: 'baseball'    },
  { label: 'Football',    value: 'football'    },
  { label: 'Accessories', value: 'accessories' },
];

// ── ② GOOGLE SHEETS — disabled, using direct inventory below
const USE_SHEETS     = false;
const SHEETS_CSV_URL = '';

// ── ③ INVENTORY — edit this directly to update your site.
// To add a product: copy any line, paste it, and update the values.
// To remove: delete the line.
// To mark sold out: set available:false (item disappears from site).
// image: paste a DIRECT imgur link ending in .jpg or .png
//        e.g. https://i.imgur.com/abc123.jpg
//        (not an album link like imgur.com/a/...)
//        To get direct link: open imgur image → right-click → Copy Image Address
const INVENTORY = [
  { code:'', name:'Ascended Heroes ETB',                          color:'', sizes:'', price:'$100', qty:75, available:true, cat:'new', image:'https://i.imgur.com/sxciDCx.png' },
  { code:'', name:'Ascended Heroes 2Pk Blister 12Ct',             color:'', sizes:'', price:'$250', qty:35, available:true, cat:'new', image:'https://i.imgur.com/BUK5g1T.png' },
  { code:'', name:'Ascended Heroes First Partners Deluxe Pin Collection', color:'', sizes:'', price:'$30', qty:75, available:true, cat:'new', image:'https://i.imgur.com/M4VDdA2.png' },
];

const SHOE_SVG = `<svg class="ph-svg" viewBox="0 0 320 160" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M16 112C50 50 112 38 152 40C192 42 228 66 258 80C278 90 300 94 308 90C316 87 316 104 304 108C272 118 32 130 16 112Z" stroke="#000" stroke-width="1.6" fill="none"/>
  <path d="M104 40L114 10C116 4 128 4 130 10L140 40" stroke="#000" stroke-width="1.6" fill="none"/>
  <path d="M140 40C156 36 178 38 200 48" stroke="#000" stroke-width="1.6" fill="none"/>
  <line x1="68" y1="92" x2="262" y2="92" stroke="#000" stroke-width="0.9" opacity="0.18"/>
</svg>`;

let allItems = [];
let activeFilter = CATEGORIES[0]?.value || 'all';

async function fetchSheet() {
  // Strategy 1: direct fetch
  try {
    const res = await fetch(SHEETS_CSV_URL, { cache: 'no-store' });
    if (!res.ok) throw new Error('HTTP ' + res.status);
    const text = await res.text();
    if (text.trim().length > 0) return text;
  } catch(e) { console.warn('Direct fetch failed, trying proxy...', e); }

  // Strategy 2: CORS proxy fallback
  try {
    const proxy = 'https://corsproxy.io/?' + encodeURIComponent(SHEETS_CSV_URL);
    const res = await fetch(proxy, { cache: 'no-store' });
    if (!res.ok) throw new Error('HTTP ' + res.status);
    const text = await res.text();
    if (text.trim().length > 0) return text;
  } catch(e) { console.warn('Proxy fetch failed too.', e); }

  return null;
}

async function init() {
  if (USE_SHEETS && SHEETS_CSV_URL !== 'YOUR_GOOGLE_SHEETS_CSV_URL_HERE') {
    const text = await fetchSheet();
    if (text) {
      const parsed = parseCSV(text);
      allItems = parsed.length ? parsed : INVENTORY;
    } else {
      console.warn('All fetches failed, using fallback inventory.');
      allItems = INVENTORY;
    }
  } else {
    allItems = INVENTORY;
  }
  buildNav();
  filterBy(activeFilter, null);
}

function parseCSV(csv) {
  const lines = csv.trim().split('\n');
  const headers = lines[0].split(',').map(h => h.trim().toLowerCase().replace(/[^a-z]/g, ''));

  return lines.slice(1).map(row => {
    const cols = [];
    let cur = '', inQ = false;
    for (const c of row) {
      if (c === '"') { inQ = !inQ; continue; }
      if (c === ',' && !inQ) { cols.push(cur.trim()); cur = ''; continue; }
      cur += c;
    }
    cols.push(cur.trim());

    const get = (key, fallback = '') => {
      const idx = headers.indexOf(key);
      return idx >= 0 && cols[idx] !== undefined ? cols[idx] : fallback;
    };

    const avail = get('available', 'true').toLowerCase();
    return {
      code:      get('code'),
      name:      get('name'),
      color:     get('color'),
      sizes:     get('sizes'),
      price:     get('price'),
      qty:       parseInt(get('qty', '0')) || 0,
      available: avail === 'true' || avail === '1' || avail === 'yes',
      cat:       get('cat', 'new').toLowerCase().trim(),
      image:     get('image'),
    };
  }).filter(i => i.code);
}

function buildNav() {
  const center = document.getElementById('navCenter');
  center.innerHTML = '';
  const row1 = document.createElement('div'); row1.className = 'nav-row';
  const row2 = document.createElement('div'); row2.className = 'nav-row';

  CATEGORIES.forEach((cat, i) => {
    const btn = document.createElement('button');
    btn.className = 'nav-link' + (cat.value === activeFilter ? ' active' : '');
    btn.textContent = cat.label;
    btn.dataset.value = cat.value;
    btn.onclick = () => filterBy(cat.value, btn);
    (i < 3 ? row1 : row2).appendChild(btn);
  });

  if (row1.children.length) center.appendChild(row1);
  if (row2.children.length) center.appendChild(row2);
}

function filterBy(cat, el) {
  activeFilter = cat;
  document.querySelectorAll('.nav-link').forEach(b => b.classList.remove('active'));
  if (el) {
    el.classList.add('active');
  } else {
    document.querySelectorAll('.nav-link').forEach(b => {
      if (b.dataset.value === cat) b.classList.add('active');
    });
  }
  const visible = allItems.filter(i => i.available && (cat === 'all' || i.cat === cat));
  renderGrid(visible);
}

function renderGrid(list) {
  const grid = document.getElementById('grid');
  grid.innerHTML = '';

  if (!list.length) {
    grid.innerHTML = '<div style="grid-column:1/-1;padding:80px;text-align:center;font-size:10px;letter-spacing:.14em;text-transform:uppercase;color:#ccc">No Items</div>';
    grid.style.setProperty('--cols', 1);
    return;
  }

  const cols = Math.min(list.length, 6);
  grid.style.setProperty('--cols', cols);

  list.forEach(item => {
    const t = document.createElement('div');
    t.className = 'tile';

    const imgHTML = item.image && item.image.trim()
      ? `<img src="${item.image.trim()}" alt="${item.name}" onerror="this.style.display='none';this.nextElementSibling.style.display='block'">${SHOE_SVG.replace('class="ph-svg"', 'class="ph-svg" style="display:none"')}`
      : SHOE_SVG;

    t.innerHTML = `
      <div class="tile-img">${imgHTML}</div>
      <div class="tile-info">
        <div class="tile-code">${item.code}</div>
        <div class="tile-name">${item.name}</div>
        <div class="tile-meta">Qty ${item.qty} · ${item.price}</div>
      </div>`;

    t.addEventListener('click', () => openModal(item));
    grid.appendChild(t);
  });
}

function openModal(item) {
  document.getElementById('m-code').textContent  = item.code;
  document.getElementById('m-name').textContent  = item.name;
  document.getElementById('m-color').textContent = item.color;
  document.getElementById('m-price').textContent = item.price;

  const sizes = item.sizes ? item.sizes.split('|').filter(Boolean) : [];
  document.getElementById('m-sizes').innerHTML = sizes.length
    ? sizes.map(s => `<button class="sz-btn" onclick="pickSz(this)">${s}</button>`).join('')
    : '<span style="font-size:10px;letter-spacing:.1em;color:#aaa;text-transform:uppercase">DM for sizing</span>';

  document.getElementById('modal').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function pickSz(btn) { document.querySelectorAll('.sz-btn').forEach(b => b.classList.remove('on')); btn.classList.add('on'); }
function closeModal() { document.getElementById('modal').classList.remove('open'); document.body.style.overflow = ''; }
function bgClose(e)  { if (e.target.id === 'modal') closeModal(); }
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

init();
</script>
</body>
</html>
